---
import BaseLayout from '../layouts/BaseLayout.astro'
// List of repos to display
const repos = [
    { owner: 'EnergieID', name: 'entsoe-py' },
    { owner: 'raft', name: 'raft.github.io' },
    { owner: 'tailwindlabs', name: 'tailwindcss' },
    { owner: 'ther0n', name: 'UnnaturalScrollWheels' }
]

// Fetch star counts from GitHub API at build time
const fetchStarCount = async (owner, name) => {
    try {
        const res = await fetch(`https://api.github.com/repos/${owner}/${name}`)
        if (!res.ok) return null
        const data = await res.json()
        return data.stargazers_count?.toLocaleString() ?? null
    } catch {
        return null
    }
}

// Get all star counts in parallel
const repoStars = await Promise.all(
    repos.map(async (repo) => ({
        ...repo,
        stars: await fetchStarCount(repo.owner, repo.name)
    }))
)
---

<BaseLayout>
    <!-- Force black and white for best printing -->
    <div
        class="bg-white text-black w-[210mm] h-[297mm] mx-auto flex flex-col border p-[1.27cm] gap-4"
    >
        <!-- Header  -->
        <div class="flex justify-between">
            <div class="text-3xl">Lemuel Lee</div>
            <div class="flex flex-col">
                <div class="font-light text-xs">lemuellee.kl@gmail.com</div>
                <a
                    class="font-light text-xs"
                    href="https://linkedin.com/in/lemuelkl"
                    target="_blank">linkedin.com/in/lemuelkl</a
                >
                <a
                    class="font-light text-xs"
                    href="https://github.com/lemuelkl"
                    target="_blank">github.com/lemuelkl</a
                >
                <a
                    class="font-light text-xs"
                    href="https://lemuellee.com"
                    target="_blank">lemuellee.com</a
                >
            </div>
        </div>
        <!-- Experience -->
        <!-- <div class="uppercase my-4 text-xl">Experience</div> -->
        <div class="w-full border-t border-accent"></div>
        <div class="flex flex-col gap-6">
            <!-- Zendo Energy -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">Zendo Energy</div>
                    <div class="text-xs">London</div>
                    <div class="text-xs">Summer 2025</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">
                        Quantitative Researcher <span class="text-xs font-light"
                            >(industry thesis)</span
                        >
                    </div>
                    <div class="text-xs">
                        Working to model and forecast energy consumption of data
                        centres to minimise energy tariff risk premiums and
                        carbon intensity
                    </div>
                </div>
            </div>
            <!-- Low Carbon Contracts Company -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">Low Carbon Contracts Company</div>
                    <div class="text-xs">London</div>
                    <div class="text-xs">Summer 2023</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">
                        Quantitative Developer Intern
                    </div>
                    <div class="text-xs">
                        Contributed to a PySpark Monte Carlo model for
                        electricity market forecasting, supporting the company's
                        role as the UK's regulatory CfD counterparty
                    </div>
                    <div class="mt-3 text-xs">
                        Applied stochastic processes with risk constraints in a
                        cashflow engine to minimise Interim Levy Rate and Total
                        Reserve Amount
                    </div>
                    <div class="mt-3 text-xs">
                        Designed Databricks AutoML infrastructure for modelling
                        interconnectors, with automated model selection and
                        retraining
                    </div>
                </div>
            </div>
            <!-- Shatin Pui Ying College -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">Shatin Pui Ying College</div>
                    <div class="text-xs">Hong Kong</div>
                    <div class="text-xs">Summer 2022</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">Fullstack Developer</div>
                    <div class="text-xs">
                        Architected, developed, and deployed a multi-user
                        e-ticketing solution
                    </div>
                    <div class="mt-3 text-xs">
                        Developed a timetable scheduler with spatial-temporal
                        and relational constraints
                    </div>
                </div>
            </div>
            <!-- Job 2 -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-xs mt-[2px]">Summer 2022</div>
                    <div class="text-xs">Summer 2021</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">
                        Mathematics and Physics Programmer
                    </div>
                    <div class="text-xs">
                        Developed numerical tests for float precision, edge
                        cases, and counterexamples
                    </div>
                    <div class="mt-3 text-xs">
                        Prototyped a Haskell web service to convert
                        HTML+Markdown+KaTeX into Docx
                    </div>
                    <div class="mt-3 text-xs">
                        Contributed to a question bank using an in-house
                        JavaScript-based functional domain-specific language for
                        generating typesets, graphs, and 3D graphics
                    </div>
                    <div class="mt-3 text-xs underline">
                        Featured in Sing Tao Headline, February 2022
                    </div>
                </div>
            </div>
            <!-- HKU TA -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">The University of Hong Kong</div>
                    <div class="text-xs">2021 - 2023</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">Teaching Assistant</div>
                    <div class="text-xs">
                        Courses: COMP1117, ENGG1330, ENGG1340
                    </div>
                    <div class="text-xs">
                        Topics: Python, C/C++, data structures & algorithms,
                        Unix, separate compilation
                    </div>
                </div>
            </div>
        </div>
        <!-- Education -->
        <!-- <div class="uppercase my-4 text-xl">Education</div> -->
        <div class="w-full border-t border-accent"></div>
        <div class="flex flex-col gap-6">
            <!-- Imperial College London -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">Imperial College London</div>
                    <div class="text-xs">2024 - 2025</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">
                        MSc Environmental Data Science and Machine Learning
                    </div>
                    <div class="text-xs">
                        Distinction expected<br />
                    </div>
                </div>
            </div>
            <!-- HKU -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">The University of Hong Kong</div>
                    <div class="text-xs">2020 - 2024</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">
                        BEng Computer Science, spc. AI & Robotics
                    </div>
                    <div class="text-xs">
                        <!-- Minor in Sustaining Cities, Cultures, and the Earth<br
                            /> -->
                        Thesis: Deep Graph Learning on Corss-border Electricity Trading<br
                        />
                        <span class="pl-0 block">
                            Faculty Peer Mentor for first-year engineering
                            students<br />
                            Staff-Student Consultative Committee student representative
                        </span>
                    </div>
                </div>
            </div>
            <!-- Royal Holloway -->
            <div class="grid grid-cols-3">
                <div class="col-span-1 flex flex-col">
                    <div class="text-sm">Royal Holloway, U. of London</div>
                    <div class="text-xs">2023</div>
                </div>
                <div class="col-span-2">
                    <div class="text-sm font-semibold">Academic Exchange</div>
                    <div class="text-xs">
                        Fully funded by HKU Worldwide Undergraduate Student
                        Exchange Scholarships<br />
                    </div>
                </div>
            </div>
        </div>
        <div class="w-full border-t border-accent"></div>
        <!-- Open Source Contributions -->
        <div class="grid grid-cols-4 text-xs gap-1">
            {
                repoStars.map((repo) => (
                    <div>
                        {repo.owner}/{repo.name} <br />
                        {repo.stars ? `${repo.stars} stars` : 'N/A'}
                    </div>
                ))
            }
        </div>
        <!-- Competitions -->
        <div class="grid grid-cols-4 text-xs gap-1">
            <div class="flex flex-col">
                <span>2nd</span>
                <span>Electronic Trading Challenge</span>
                <span>Jane Street</span>
            </div>
            <div class="flex flex-col">
                <span>Finalist</span>
                <span>Crypto Trading Challenge</span>
                <span>Algogene</span>
            </div>
            <div class="flex flex-col">
                <span>Invitee</span>
                <span>Code For Good</span>
                <span>J.P. Morgan</span>
            </div>
            <div class="flex flex-col">
                <span>2nd</span>
                <span>Robotic Car Competition</span>
                <span>CityUHK</span>
            </div>
        </div>
        <div class="text-xs font-light text-right">
            see <a href="lemuellee.com" target="_blank">lemuellee.com</a> for full
            list
        </div>
    </div>
</BaseLayout>
